<div ng-repeat="unit in applicationUnits">
	<div class="icon block"
			 ng-init="$parentIndex = $index"
			 icon-coord ng-model="unit"
			 ng-mouseup="iconUpdate(unit)"
			 ng-style="{ 'left': unit.unitPositionX + 'px', 'top': unit.unitPositionY + 'px'}"
			 ng-dblclick="getWindow(unit, $parentIndex)">
		<img ng-src="{{unit.unitImgPath}}{{hash}}">
		{{unit.unitName}} x: {{unit.unitPositionX}} y: {{unit.unitPositionY}}
	</div>
	<!--WINDOWS OF UNIT BEGIN HERE-->
	<section ng-repeat="win in unit.windows" ng-show="win.isMin == 1">
		<div win-draggable win-resizable win-z-index
				 win-coord ng-model="win"
				 class="abs"
				 ng-style="{
				 'position': 'absolute',
				 'left': win.windowPositionX + 'px',
				 'top': win.windowPositionY + 'px',
				 'width': (win.windowWidth <= 200 ? 200 : win.windowWidth) + 'px',
				 'height': (win.windowHeight <= 200 ? 200 : win.windowHeight) + 'px'
				 }"
				 ng-mouseup="updateWindow(win)"
				 ng-class="!win.isMax ?'window single-window' : 'window_full'">
			<div class="abs window_inner">
				<!--ШАПКА ОКНА BEGIN HERE-->
				<header class="window_top"
								ng-dblclick="win.isMax = win.isMax==1?0:1; updateWindow(win)">
					<span class="float_left">
						<img width="20" ng-src="{{unit.unitImgPath}}{{hash}}"/>
						{{win.title}} - {{unit.unitName}}
					</span>
					<span class="float_right">
						<a href class="window_min" ng-click="win.isMin = 0; updateWindow(win)"></a>
						<a href class="window_resize" ng-click="win.isMax = win.isMax==1?0:1; updateWindow(win)"></a>
						<a href class="window_close" ng-click="deleteWindow($index, $parentIndex, win)"></a>
					</span>
				</header>
				<!--ШАПКА ОКНА END HERE-->
				<!--CONTENT BEGIN HERE-->
				<div class="abs window_content">
					<div class="window_iframe window_main_without_aside">
						<iframe ng-src="{{unit.applicationUrl}}"></iframe>
						<!--<object data="{{unit.applicationUrl}}"></object>-->
					</div>
					<div class="overlay"></div>
				</div>
				<!--CONTENT END HERE-->
				<!--FOOTER BEGIN HERE-->
				<div class="abs window_bottom">
					<!--Free: 80.9 GB {{applicationUrl}}-->
				</div>
				<!--FOOTER END HERE-->
				<span class="abs ui-resizable-handle ui-resizable-se winResizableBlock"></span>
			</div>
		</div>
	</section>
	<!--WINDOWS OF UNIT END HERE-->
</div>
<div class="desktop-allocate"></div>